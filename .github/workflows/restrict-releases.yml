name: Restrict Releases

# Note: This workflow runs after a release event has occurred.
# It serves as a monitoring and audit tool to detect unauthorized releases.
# For proactive prevention, consider using repository protection rules or
# GitHub Actions environments with required reviewers.

on:
  release:
    types: [published, created, edited, deleted, prereleased, unpublished]

jobs:
  check-release-permission:
    runs-on: ubuntu-latest
    steps:
      - name: Check if release is created/updated by ekzhu
        run: |
          if [ "${{ github.actor }}" != "ekzhu" ]; then
            echo "Error: Only user 'ekzhu' is allowed to create or update releases."
            echo "Current user: ${{ github.actor }}"
            exit 1
          else
            echo "Release permission granted for user 'ekzhu'."
          fi
